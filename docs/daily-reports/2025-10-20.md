## 22:38 タグ管理機能の実装

- 概要: Frontmatterにタグを1つ付与できるプルダウンメニュー機能と、タグ管理機能を実装
- 詳細:
  - **型定義の拡張**: `Tag`型、`HistoryEntry`に`tag`フィールド追加
  - **ストレージサービス拡張**: タグのCRUD操作（追加/削除/取得/並び替え）を実装
  - **Frontmatterユーティリティ作成**: YAML frontmatter形式でタグ付与・パース機能
  - **設定画面**: タグ管理セクション追加（一覧表示、追加ダイアログ、削除機能）
  - **ホーム画面**: プルダウンメニューでタグ選択機能追加、投稿時にFrontmatter自動生成
  - **履歴画面**: Chipコンポーネントでタグ表示
  - **バグ修正**:
    - 日本語入力問題: `autoFocus`削除により解決
    - タグメニューが再度開けない問題: `TouchableOpacity`ベースの実装に変更
- 実装方針:
  - 保存方式: AsyncStorage（既存システムと統一）
  - Frontmatter形式: `tags: [タグ名]` のみ（シンプル設計）
  - タグ管理UI: 設定画面内に統合
  - 既存データ互換性: タグなしエントリーも正常表示
- 次のアクション: 実機での動作確認

## 22:55 UX改善とバグ修正

- 概要: タグ管理画面の日本語入力とキーボード表示時の問題を修正
- 詳細:
  - **Dialog→Card方式に変更**: React Native PaperのDialog+Portalは日本語IMEと相性が悪いため、画面内に直接Cardで入力フォームを表示する方式に変更
  - **KeyboardAvoidingView追加**: iOS/Android対応のキーボード回避処理を実装（iOSは`padding`、Androidは`height`）
  - **自動スクロール実装**: TextInputフォーカス時（キーボード表示時）に`scrollToEnd`で自動スクロール
  - **UX改善**: カード表示時の自動スクロールは削除し、ユーザーが明示的にタップした時のみスクロール
- 問題と解決:
  - 問題1: Dialogで日本語入力時に一文字ずつ確定される → Cardベースの実装に変更
  - 問題2: キーボード表示時に入力欄が隠れる → KeyboardAvoidingView + onFocusスクロール
- 技術的な学び:
  - React Native PaperのDialog内TextInputは日本語IMEと干渉する既知の問題
  - Portal使用時のレンダリング順序がIMEに影響
  - 画面内直接配置の方がシンプルで確実
- 次のアクション: なし（実装完了）
